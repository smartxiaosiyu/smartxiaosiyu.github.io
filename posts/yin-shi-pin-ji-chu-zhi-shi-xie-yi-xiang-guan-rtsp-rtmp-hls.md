---
title: '音视频基础知识---协议相关RTSP RTMP HLS'
date: 2021-09-16 11:37:38
tags: [音视频]
published: true
hideInList: false
feature: 
isTop: false
---
### UDP、TCP
UDP/TCP本质上是一种网络传输协议，负责、并规范了信息的传递
![](https://smartxiaosiyu.github.io/post-images/1631763941223.jpeg)

### RTSP
RTSP，是目前三大流媒体协议之一，英文全称为：Real Time Streaming Protocol，即**实时流传输协议**，它是由Real Networks 和 Netscape2家公司共同创立。**它本身并不传输数据**，传输数据的动作可以让UDP/TCP协议完成，而且RTSP可以选择基于RTP协议传输。
 + RTSP对流媒体提供了诸如暂停，快进等控制，它不仅提供了对于视频流的控制还定义了流格式，如TS、 mp4 格式。通常应用于安防视频监控等场景，如公安调查监控进行视频的查看、回放、快进、后退等操作，十分友好。
 + 最大的特点除了**控制视频操作**外还**具有低延时的特点**，通常可实现毫秒级的延时，但是也存在一些弊端，如该视频流**技术实现复杂**，而且**对浏览器很挑剔**，且flash插件播不了，这也极大的限制了它的发展。

### RTMP
RTMP，英文全称为：Real Time Messaging Protocol，即**实时消息传输协议**，由Adobe公司创立。RTMP主要**基于TCP协议传输**，主要传输 flv， f4v 格式流，最大的特点是装个插件可以在各大浏览器进行播放，播放门槛相对不高，可在手机上得到充分的应用、推广，因此比较受欢迎，**目前也是视频云服务的主推流协议**。此外RTMP**时延也比较低**，目前常用于手机直播、语音通话等场景。
 + 这种视频流协议传输的数据主要包含2部分，第一，基本单元为Message（消息），第二，最小单元是Chunk（消息块），发送端会把需要传输的媒体数据封装成消息，然后把消息拆分成消息块，每一个消息具有特定的id号，后面将根据这个id号，将一个个零散的Chunk（消息块）又重新拼接成消息（有点小蝌蚪找妈妈的感觉，拆散又合体）。
  
### HLS
HLS，英文全称为：HTTP Live Streaming，由苹果公司提出，它是**基于Http的流媒体网络传输协议**，主要传输TS格式流，最大的特点是**安卓、苹果都能兼容，通用性强**，而且码流切换流畅，满足不同网络、不同画质的用户播放需要，但是因为该种视频流协议也存在较为致命的**缺陷**，那就是**网络延时太高**。
 + 本质上HLS视频流传输是将整个视频流分成一个个小切片，可理解为切土豆片，这些小片都是基于HTTP文件来下载——先下载，后观看。
 + 用户观看视频实际上是下载这些小的视频切片，每次只下载一些，苹果官方建议是请求到3个片之后才开始播放，若是直播，时延将超10秒，所以比较适合于点播。
 + 因此HLS视频的切片一般建议10s，时间间隔太短就切容易造成碎片化太严重不方便数据存储和处理，太长容易造成时延加重。

### RTSP、RTMP、HLS对比总结
![](https://smartxiaosiyu.github.io/post-images/1631764453146.jpeg)

